<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Browser Interface</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      /* Chrome theme (default) */
      --primary-color: #4285f4;
      --secondary-color: #34a853;
      --accent-color: #ea4335;
      --warning-color: #fbbc05;
      --bg-color: #ffffff;
      --toolbar-bg: #f1f3f4;
      --tab-bg: #ffffff;
      --tab-active-bg: #ffffff;
      --text-color: #202124;
      --border-color: #dadce0;
      --hover-color: #f8f9fa;
      --font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      --browser-name: 'Google Chrome';
    }

    .opera-gx-theme {
      --primary-color: #ff1b44;
      --secondary-color: #00b0f4;
      --accent-color: #ff1b44;
      --warning-color: #ff9500;
      --bg-color: #1a1a2e;
      --toolbar-bg: #0f3460;
      --tab-bg: #16213e;
      --tab-active-bg: #1a1a2e;
      --text-color: #e6e6e6;
      --border-color: #2d3748;
      --hover-color: #2a2a3e;
      --font-family: 'Inter', 'Segoe UI', sans-serif;
      --browser-name: 'Opera GX';
    }

    .brave-theme {
      --primary-color: #fb542b;
      --secondary-color: #1d1d1d;
      --accent-color: #ff9500;
      --warning-color: #ce4d45;
      --bg-color: #0c0c0c;
      --toolbar-bg: #1a1a1a;
      --tab-bg: #1a1a1a;
      --tab-active-bg: #0c0c0c;
      --text-color: #f0f0f0;
      --border-color: #333333;
      --hover-color: #252525;
      --font-family: 'Inter', 'SF Pro Display', sans-serif;
      --browser-name: 'Brave';
    }

    .firefox-theme {
      --primary-color: #ff7139;
      --secondary-color: #00a7e0;
      --accent-color: #ff7139;
      --warning-color: #ffcd02;
      --bg-color: #0c0c0d;
      --toolbar-bg: #2b2a33;
      --tab-bg: #2b2a33;
      --tab-active-bg: #0c0c0d;
      --text-color: #fbfbfe;
      --border-color: #52525e;
      --hover-color: #3a3944;
      --font-family: 'Inter', 'SF Pro Text', sans-serif;
      --browser-name: 'Firefox';
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family);
      background: var(--bg-color);
      color: var(--text-color);
      height: 100vh;
      overflow: hidden;
      transition: background-color 0.3s, color 0.3s;
    }

    /* Theme Selector */
    .theme-selector {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 6px;
      z-index: 1000;
      background: var(--toolbar-bg);
      border-radius: 20px;
      padding: 8px;
      border: 1px solid var(--border-color);
    }

    .theme-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s, box-shadow 0.2s;
      color: white;
      font-weight: 600;
      font-size: 12px;
    }

    .theme-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .theme-btn.chrome { background: linear-gradient(45deg, #4285f4, #34a853, #ea4335, #fbbc05); }
    .theme-btn.opera-gx { background: linear-gradient(45deg, #ff1b44, #00b0f4); }
    .theme-btn.brave { background: linear-gradient(45deg, #fb542b, #1d1d1d); }
    .theme-btn.firefox { background: linear-gradient(45deg, #ff7139, #00a7e0); }

    /* Browser Header */
    .browser-header {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background: var(--toolbar-bg);
      border-bottom: 1px solid var(--border-color);
      height: 60px;
      gap: 16px;
    }

    .browser-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .browser-icon {
      width: 28px;
      height: 28px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    .chrome .browser-icon { background: linear-gradient(45deg, #4285f4, #34a853); }
    .opera-gx-theme .browser-icon { background: linear-gradient(45deg, #ff1b44, #00b0f4); }
    .brave-theme .browser-icon { background: linear-gradient(45deg, #fb542b, #1d1d1d); }
    .firefox-theme .browser-icon { background: linear-gradient(45deg, #ff7139, #00a7e0); }

    .browser-name {
      font-size: 18px;
      font-weight: 600;
    }

    /* Navigation Bar */
    .nav-bar {
      display: flex;
      align-items: center;
      padding: 0 16px;
      background: var(--toolbar-bg);
      gap: 8px;
      height: 56px;
      border-bottom: 1px solid var(--border-color);
    }

    .nav-btn {
      background: none;
      border: none;
      color: var(--text-color);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .nav-btn:hover {
      background-color: var(--hover-color);
    }

    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .nav-btn svg {
      width: 20px;
      height: 20px;
    }

    .url-bar-container {
      flex: 1;
      display: flex;
      align-items: center;
      background: var(--tab-active-bg);
      border-radius: 24px;
      padding: 0 16px;
      height: 40px;
      border: 1px solid var(--border-color);
      transition: border-color 0.2s;
    }

    .url-bar-container:focus-within {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1);
    }

    .lock-icon {
      color: var(--secondary-color);
      margin-right: 8px;
    }

    .lock-icon svg {
      width: 16px;
      height: 16px;
    }

    #urlInput {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--text-color);
      font-size: 14px;
      outline: none;
      font-family: var(--font-family);
    }

    .url-actions {
      display: flex;
      gap: 8px;
    }

    .action-btn {
      background: none;
      border: none;
      color: var(--text-color);
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .action-btn:hover {
      background-color: var(--hover-color);
    }

    .action-btn svg {
      width: 18px;
      height: 18px;
    }

    /* Tabs */
    .tabs-container {
      display: flex;
      background: var(--toolbar-bg);
      padding: 0 16px;
      overflow-x: auto;
      height: 48px;
      border-bottom: 1px solid var(--border-color);
      scrollbar-width: thin;
    }

    .tabs-container::-webkit-scrollbar {
      height: 4px;
    }

    .tabs-container::-webkit-scrollbar-track {
      background: var(--toolbar-bg);
    }

    .tabs-container::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 2px;
    }

    .tab {
      display: flex;
      align-items: center;
      padding: 0 16px;
      background: var(--tab-bg);
      border: 1px solid var(--border-color);
      border-bottom: none;
      border-radius: 8px 8px 0 0;
      margin-right: 4px;
      min-width: 160px;
      max-width: 240px;
      cursor: pointer;
      transition: background-color 0.2s;
      position: relative;
    }

    .tab:hover {
      background-color: var(--hover-color);
    }

    .tab.active {
      background-color: var(--tab-active-bg);
      border-bottom: 1px solid var(--tab-active-bg);
      z-index: 1;
    }

    .tab-favicon {
      width: 16px;
      height: 16px;
      margin-right: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tab-title {
      flex: 1;
      font-size: 13px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tab-close {
      margin-left: 8px;
      opacity: 0.6;
      transition: opacity 0.2s;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .tab-close:hover {
      opacity: 1;
      background-color: var(--hover-color);
    }

    .new-tab-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      min-width: 36px;
      height: 36px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      margin-left: 4px;
      cursor: pointer;
      transition: opacity 0.2s;
      align-self: center;
    }

    .new-tab-btn:hover {
      opacity: 0.9;
    }

    .new-tab-btn svg {
      width: 20px;
      height: 20px;
    }

    /* Browser Content */
    .browser-content {
      height: calc(100vh - 164px);
      position: relative;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: white;
    }

    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .loading-spinner {
      width: 48px;
      height: 48px;
      border: 4px solid var(--border-color);
      border-top-color: var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 16px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Bookmarks Bar - Clean and Simple */
    .bookmarks-bar {
      display: flex;
      padding: 8px 16px;
      background: var(--toolbar-bg);
      border-bottom: 1px solid var(--border-color);
      height: 40px;
      align-items: center;
      gap: 16px;
      overflow-x: auto;
    }

    .bookmark {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s ease;
      flex-shrink: 0;
      white-space: nowrap;
      background: var(--tab-active-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    .bookmark:hover {
      background-color: var(--hover-color);
      border-color: var(--primary-color);
    }

    .bookmark-icon {
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Status Bar */
    .status-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 16px;
      background: var(--toolbar-bg);
      border-top: 1px solid var(--border-color);
      height: 28px;
      font-size: 12px;
    }
    .status-section {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Custom icons */
    

    /* Responsive */
    @media (max-width: 768px) {
      .browser-header {
        padding: 8px 12px;
        height: 50px;
      }
      
      .browser-name {
        font-size: 16px;
      }
      
      .nav-bar {
        padding: 0 12px;
        height: 50px;
      }
      
      .tabs-container {
        height: 42px;
        padding: 0 12px;
      }
      
      .tab {
        min-width: 120px;
        padding: 0 12px;
      }
      
      .bookmarks-bar {
        padding: 6px 12px;
        gap: 12px;
      }
      
      .bookmark {
        padding: 5px 10px;
        font-size: 12px;
      }
      
      .browser-content {
        height: calc(100vh - 148px);
      }
    }
  </style>
</head>
<body>
  <!-- Theme Selector -->
  <div class="theme-selector">
    <button class="theme-btn chrome" onclick="setTheme('chrome')" title="Chrome Theme">C</button>
    <button class="theme-btn opera-gx" onclick="setTheme('opera-gx')" title="Opera GX Theme">O</button>
    <button class="theme-btn brave" onclick="setTheme('brave')" title="Brave Theme">B</button>
    <button class="theme-btn firefox" onclick="setTheme('firefox')" title="Firefox Theme">F</button>
  </div>

  <!-- Browser Header -->
  <div class="browser-header">
    <div class="browser-brand">
      <div class="browser-icon">
        <i data-lucide="globe"></i>
      </div>
      <span class="browser-name" id="browserName">Google Chrome</span>
    </div>
  </div>

  <!-- Tabs -->
  <div class="tabs-container" id="tabsContainer">
    <!-- Tabs will be generated here -->
  </div>

  <!-- Navigation Bar -->
  <div class="nav-bar">
    <button class="nav-btn" id="backBtn" title="Back">
      <i data-lucide="chevron-left"></i>
    </button>
    <button class="nav-btn" id="forwardBtn" title="Forward">
      <i data-lucide="chevron-right"></i>
    </button>
    <button class="nav-btn" id="reloadBtn" title="Reload">
      <i data-lucide="refresh-cw"></i>
    </button>
    <button class="nav-btn" id="homeBtn" title="Home">
      <i data-lucide="home"></i>
    </button>
    
    <div class="url-bar-container">
      <div class="lock-icon" id="lockIcon">
        <i data-lucide="lock"></i>
      </div>
      <input type="text" id="urlInput" placeholder="Search Google or type a URL" autocomplete="off" />
      <div class="url-actions">
        <button class="action-btn" id="bookmarkBtn" title="Bookmark this page">
          <i data-lucide="star"></i>
        </button>
        <button class="action-btn" onclick="loadUrl()" title="Go">
          <i data-lucide="search"></i>
        </button>
      </div>
    </div>
    
    <button class="nav-btn" id="menuBtn" title="Menu">
      <i data-lucide="menu"></i>
    </button>
  </div>

  <!-- Bookmarks Bar -->
  <div class="bookmarks-bar" id="bookmarksBar">
    <!-- Bookmarks will be generated here -->
  </div>

  <!-- Browser Content -->
  <div class="browser-content">
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
      <div class="loading-spinner"></div>
      <div id="loadingText">Loading...</div>
    </div>
    <iframe id="viewer" src=""></iframe>
  </div>

  <!-- Status Bar -->
  <div class="status-bar">
    <div class="status-section">
      <i data-lucide="shield" style="width: 14px; height: 14px;"></i>
      <span id="securityInfo">Not secure</span>
    </div>
    <div class="status-section">
      <i data-lucide="gamepad-2" style="width: 14px; height: 14px;"></i>
      <span id="statusText">Ready - Play your favorite games!</span>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Browser state
    let currentTheme = 'chrome';
    let tabs = [];
    let currentTabIndex = 0;
    
    // Updated bookmarks with clean styling and custom icons
    let bookmarks = [
      { name: 'Google', url: 'https://www.google.com', icon: 'search' },
      { name: 'YouTube', url: 'https://www.youtube.com', icon: 'play-circle' },
      { name: 'GitHub', url: 'https://github.com', icon: 'github' },
      { name: 'Geometry Dash', url: 'https://nowgg.fun/apps/robtop-games/1400/geometry-dash.html', icon: 'music' },
      { name: 'Among Us', url: 'https://nowgg.fun/apps/innersloth-llc/4047/among-us.html', icon: 'users' },
      { name: 'Roblox', url: 'https://nowgg.fun/apps/a/19900/b.html', icon: 'diamond' },
      { name: 'Fortnite', url: 'https://nowgg.fun/apps/a/10004/b.html', icon: 'annoyed' },
      { name: 'Cookie Run', url: 'https://nowgg.fun/apps/a/10019/b.html', icon: 'castle' },
      { name: 'ChatGPT', url: 'https://chatgpt.com', icon: 'message-circle' }
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Create initial tab
      createNewTab('New Tab', '');
      
      // Setup event listeners
      setupEventListeners();
      
      // Render bookmarks
      renderBookmarks();
      
      // Load default page
      loadUrl('https://www.google.com');
      
      // Update Lucide icons after DOM changes
      setInterval(() => {
        lucide.createIcons();
      }, 100);
      
      // Update status bar with fun messages
      updateStatusMessages();
    });

    // Tab management
    function createNewTab(title, url, setActive = true) {
      const tabId = Date.now();
      const tab = {
        id: tabId,
        title: title,
        url: url,
        favicon: 'globe'
      };
      
      tabs.push(tab);
      
      if (setActive) {
        currentTabIndex = tabs.length - 1;
      }
      
      renderTabs();
      lucide.createIcons();
      return tabId;
    }

    function switchTab(index) {
      if (index >= 0 && index < tabs.length) {
        currentTabIndex = index;
        const tab = tabs[index];
        
        // Update URL input
        document.getElementById('urlInput').value = tab.url || '';
        
        // Update iframe
        if (tab.url) {
          const viewer = document.getElementById('viewer');
          viewer.src = getEmbedUrl(tab.url);
          updateSecurityIndicator(tab.url);
        }
        
        renderTabs();
        updateNavigationButtons();
      }
    }

    function closeTab(index, e) {
      if (e) e.stopPropagation();
      
      if (tabs.length <= 1) return;
      
      tabs.splice(index, 1);
      
      if (currentTabIndex >= index && currentTabIndex > 0) {
        currentTabIndex--;
      }
      
      if (currentTabIndex >= tabs.length) {
        currentTabIndex = tabs.length - 1;
      }
      
      renderTabs();
      lucide.createIcons();
      
      if (tabs[currentTabIndex]) {
        switchTab(currentTabIndex);
      }
    }

    function renderTabs() {
      const container = document.getElementById('tabsContainer');
      container.innerHTML = '';
      
      tabs.forEach((tab, index) => {
        const tabEl = document.createElement('div');
        tabEl.className = `tab ${index === currentTabIndex ? 'active' : ''}`;
        tabEl.onclick = () => switchTab(index);
        
        // Determine appropriate icon based on URL
        let icon = tab.favicon;
        let customIcon = false;
        let iconHTML = '';
        
        if (tab.url) {
          if (tab.url.includes('geometry-dash')) {
            icon = 'music';
          } else if (tab.url.includes('among-us')) {
            icon = 'users';
          } else if (tab.url.includes('roblox') || tab.url.includes('/b.html')) {
            customIcon = true;
            iconHTML = '<div class="roblox-logo"></div>';
          } else if (tab.url.includes('fortnite')) {
            customIcon = true;
            iconHTML = '<div class="fortnite-icon"></div>';
          } else if (tab.url.includes('cookie-run') || tab.url.includes('/10019/')) {
            customIcon = true;
            iconHTML = '<div class="cookie-icon"></div>';
          } else if (tab.url.includes('chatgpt')) {
            icon = 'message-square';
          } else if (tab.url.includes('youtube')) {
            icon = 'play-circle';
          } else if (tab.url.includes('google')) {
            icon = 'search';
          } else if (tab.url.includes('github')) {
            icon = 'github';
          }
        }
        
        if (customIcon) {
          tabEl.innerHTML = `
            <div class="tab-favicon">
              ${iconHTML}
            </div>
            <span class="tab-title">${tab.title || 'New Tab'}</span>
            <div class="tab-close" onclick="closeTab(${index}, event)">
              <i data-lucide="x"></i>
            </div>
          `;
        } else {
          tabEl.innerHTML = `
            <div class="tab-favicon">
              <i data-lucide="${icon}"></i>
            </div>
            <span class="tab-title">${tab.title || 'New Tab'}</span>
            <div class="tab-close" onclick="closeTab(${index}, event)">
              <i data-lucide="x"></i>
            </div>
          `;
        }
        
        container.appendChild(tabEl);
      });
      
      // Add new tab button
      const newTabBtn = document.createElement('button');
      newTabBtn.className = 'new-tab-btn';
      newTabBtn.title = 'New Tab';
      newTabBtn.innerHTML = '<i data-lucide="plus"></i>';
      newTabBtn.onclick = () => createNewTab('New Tab', '');
      container.appendChild(newTabBtn);
      
      lucide.createIcons();
    }

    // Bookmarks
    function renderBookmarks() {
      const container = document.getElementById('bookmarksBar');
      container.innerHTML = '';
      
      bookmarks.forEach(bookmark => {
        const bookmarkEl = document.createElement('div');
        bookmarkEl.className = 'bookmark';
        bookmarkEl.title = `Open ${bookmark.name}`;
        bookmarkEl.onclick = () => {
          document.getElementById('urlInput').value = bookmark.url;
          loadUrl(bookmark.url);
          
          // Update status with specific message
          if (bookmark.name.includes('Geometry Dash')) {
            document.getElementById('statusText').textContent = 'Loading Geometry Dash - Get ready to jump!';
          } else if (bookmark.name.includes('Among Us')) {
            document.getElementById('statusText').textContent = 'Loading Among Us - Who is the imposter?';
          } else if (bookmark.name.includes('Roblox')) {
            document.getElementById('statusText').textContent = 'Loading Roblox - Infinite adventures await!';
          } else if (bookmark.name.includes('Fortnite')) {
            document.getElementById('statusText').textContent = 'Loading Fortnite - Battle Royale time!';
          } else if (bookmark.name.includes('Cookie Run')) {
            document.getElementById('statusText').textContent = 'Loading Cookie Run Kingdom - Sweet adventure!';
          } else if (bookmark.name.includes('ChatGPT')) {
            document.getElementById('statusText').textContent = 'Loading ChatGPT - AI assistant ready!';
          }
        };
        
        // Use custom icons for specific bookmarks
        let iconHTML = '';
        if (bookmark.icon === 'roblox') {
          iconHTML = '<div class="roblox-logo"></div>';
        } else if (bookmark.icon === 'fortnite') {
          iconHTML = '<div class="fortnite-icon"></div>';
        } else if (bookmark.icon === 'cookie') {
          iconHTML = '<div class="cookie-icon"></div>';
        } else {
          iconHTML = `<i data-lucide="${bookmark.icon}"></i>`;
        }
        
        bookmarkEl.innerHTML = `
          <div class="bookmark-icon">
            ${iconHTML}
          </div>
          <span>${bookmark.name}</span>
        `;
        
        container.appendChild(bookmarkEl);
      });
      
      lucide.createIcons();
    }

    function addBookmark() {
      const url = document.getElementById('urlInput').value.trim();
      if (!url) return;
      
      const name = extractDomain(url) || 'New Bookmark';
      let icon = 'star';
      
      // Auto-detect URLs for icon selection
      if (url.includes('geometry-dash')) {
        icon = 'music';
      } else if (url.includes('among-us')) {
        icon = 'users';
      } else if (url.includes('roblox') || url.includes('/b.html')) {
        icon = 'roblox';
      } else if (url.includes('fortnite')) {
        icon = 'fortnite';
      } else if (url.includes('cookie-run') || url.includes('/10019/')) {
        icon = 'cookie';
      } else if (url.includes('chatgpt')) {
        icon = 'message-square';
      } else if (url.includes('youtube')) {
        icon = 'play-circle';
      } else if (url.includes('google')) {
        icon = 'search';
      } else if (url.includes('github')) {
        icon = 'github';
      }
      
      bookmarks.push({ name, url, icon });
      renderBookmarks();
      
      // Visual feedback
      const btn = document.getElementById('bookmarkBtn');
      const originalHTML = btn.innerHTML;
      btn.innerHTML = '<i data-lucide="star" style="color: var(--warning-color)"></i>';
      setTimeout(() => {
        btn.innerHTML = originalHTML;
        lucide.createIcons();
      }, 1000);
    }

    // URL loading
    function loadUrl(url = null) {
      const input = url || document.getElementById('urlInput').value.trim();
      if (!input) return;
      
      let finalUrl = input;
      if (!input.startsWith('http://') && !input.startsWith('https://')) {
        if (input.includes('.')) {
          finalUrl = 'https://' + input;
        } else {
          finalUrl = 'https://www.google.com/search?q=' + encodeURIComponent(input);
        }
      }
      
      // Show loading
      const loadingOverlay = document.getElementById('loadingOverlay');
      const loadingText = document.getElementById('loadingText');
      loadingOverlay.style.display = 'flex';
      
      // Custom loading messages
      if (finalUrl.includes('geometry-dash')) {
        loadingText.textContent = 'Loading Geometry Dash...';
      } else if (finalUrl.includes('among-us')) {
        loadingText.textContent = 'Loading Among Us...';
      } else if (finalUrl.includes('roblox') || finalUrl.includes('/19900/')) {
        loadingText.textContent = 'Loading Roblox...';
      } else if (finalUrl.includes('fortnite') || finalUrl.includes('/10004/')) {
        loadingText.textContent = 'Loading Fortnite...';
      } else if (finalUrl.includes('cookie-run') || finalUrl.includes('/10019/')) {
        loadingText.textContent = 'Loading Cookie Run Kingdom...';
      } else if (finalUrl.includes('chatgpt')) {
        loadingText.textContent = 'Loading ChatGPT...';
      } else {
        loadingText.textContent = `Loading ${extractDomain(finalUrl) || finalUrl}...`;
      }
      
      // Update current tab
      if (tabs[currentTabIndex]) {
        tabs[currentTabIndex].url = finalUrl;
        tabs[currentTabIndex].title = extractDomain(finalUrl) || 'Loading...';
      }
      
      // Update iframe
      const embedUrl = getEmbedUrl(finalUrl);
      const viewer = document.getElementById('viewer');
      viewer.src = embedUrl;
      
      // Update UI
      document.getElementById('urlInput').value = finalUrl;
      updateSecurityIndicator(finalUrl);
      updateNavigationButtons();
      
      // Hide loading after a delay
      setTimeout(() => {
        loadingOverlay.style.display = 'none';
        if (tabs[currentTabIndex]) {
          tabs[currentTabIndex].title = extractDomain(finalUrl) || finalUrl;
          renderTabs();
        }
        
        // Update status with fun message
        updateStatusMessages();
      }, 1500);
    }

    function getEmbedUrl(url) {
      // No encoding as requested
      return `https://bx3-cdn.gh-pages.wiki.gd/embed#${url}`;
    }

    function updateSecurityIndicator(url) {
      const lockIcon = document.getElementById('lockIcon');
      const securityInfo = document.getElementById('securityInfo');
      
      if (url.startsWith('https://')) {
        lockIcon.innerHTML = '<i data-lucide="lock"></i>';
        lockIcon.style.color = 'var(--secondary-color)';
        securityInfo.textContent = 'Secure';
      } else {
        lockIcon.innerHTML = '<i data-lucide="unlock"></i>';
        lockIcon.style.color = 'var(--warning-color)';
        securityInfo.textContent = 'Not secure';
      }
      lucide.createIcons();
    }

    // Navigation
    function setupEventListeners() {
      // Enter key in URL input
      document.getElementById('urlInput').addEventListener('keydown', e => {
        if (e.key === 'Enter') {
          loadUrl();
        }
      });
      
      // Navigation buttons
      document.getElementById('backBtn').onclick = () => {
        const viewer = document.getElementById('viewer');
        try {
          viewer.contentWindow.history.back();
          document.getElementById('statusText').textContent = 'Navigating back...';
        } catch(e) {
          console.log('Cannot go back');
        }
      };
      
      document.getElementById('forwardBtn').onclick = () => {
        const viewer = document.getElementById('viewer');
        try {
          viewer.contentWindow.history.forward();
          document.getElementById('statusText').textContent = 'Navigating forward...';
        } catch(e) {
          console.log('Cannot go forward');
        }
      };
      
      document.getElementById('reloadBtn').onclick = () => {
        const viewer = document.getElementById('viewer');
        viewer.src = viewer.src;
        document.getElementById('statusText').textContent = 'Reloading page...';
        
        // Show loading
        const loadingOverlay = document.getElementById('loadingOverlay');
        loadingOverlay.style.display = 'flex';
        loadingText.textContent = 'Reloading...';
        setTimeout(() => {
          loadingOverlay.style.display = 'none';
          updateStatusMessages();
        }, 1000);
      };
      
      document.getElementById('homeBtn').onclick = () => {
        loadUrl('https://www.google.com');
      };
      
      document.getElementById('bookmarkBtn').onclick = addBookmark;
      
      // Menu button
      document.getElementById('menuBtn').onclick = () => {
        const gameLinks = bookmarks
          .filter(b => ['Geometry Dash', 'Among Us', 'Roblox', 'Fortnite', 'Cookie Run'].includes(b.name))
          .map(b => `â€¢ ${b.name}`)
          .join('\n');
        
        alert(`${document.getElementById('browserName').textContent}\n\nðŸŽ® Featured Games:\n${gameLinks}\n\nOther Features:\nâ€¢ Multiple browser themes\nâ€¢ Tab management\nâ€¢ Bookmarks\nâ€¢ URL navigation\nâ€¢ Security indicators\nâ€¢ Responsive design\n\nUsing Lucide Icons`);
      };
      
      // URL input focus
      document.getElementById('urlInput').addEventListener('focus', () => {
        document.getElementById('urlInput').select();
      });
    }

    function updateNavigationButtons() {
      // Simple implementation - in a real browser, you'd check if there's history
      const backBtn = document.getElementById('backBtn');
      const forwardBtn = document.getElementById('forwardBtn');
      
      // Enable both for demo purposes
      backBtn.disabled = false;
      forwardBtn.disabled = false;
    }

    // Theme management
    function setTheme(theme) {
      document.body.className = '';
      currentTheme = theme;
      
      switch(theme) {
        case 'chrome':
          document.getElementById('browserName').textContent = 'Google Chrome';
          document.body.classList.add('chrome');
          break;
        case 'opera-gx':
          document.body.classList.add('opera-gx-theme');
          document.getElementById('browserName').textContent = 'Opera GX';
          break;
        case 'brave':
          document.body.classList.add('brave-theme');
          document.getElementById('browserName').textContent = 'Brave';
          break;
        case 'firefox':
          document.body.classList.add('firefox-theme');
          document.getElementById('browserName').textContent = 'Firefox';
          break;
      }
      
      // Update Lucide icons for the new theme
      lucide.createIcons();
    }

    // Update status bar with fun messages
    function updateStatusMessages() {
      const messages = [
        'Ready - Play your favorite games!',
        'Geometry Dash loaded - Jump to the beat! ðŸŽµ',
        'Among Us loaded - Find the imposter! ðŸ‘ï¸',
        'Roblox loaded - Create and play! ðŸ—ï¸',
        'Fortnite loaded - Battle Royale time! ðŸ”«',
        'Cookie Run loaded - Sweet adventure! ðŸª',
        'ChatGPT loaded - AI assistant ready! ðŸ¤–',
        'Browser ready - Game on! ðŸŽ®',
        'All systems go - Time to play!',
        'Connected - Gaming mode activated!'
      ];
      
      // Only update if we're not showing a specific message
      const currentStatus = document.getElementById('statusText').textContent;
      if (!currentStatus.includes('Loading') && !currentStatus.includes('Navigating') && !currentStatus.includes('Reloading')) {
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        document.getElementById('statusText').textContent = randomMessage;
      }
    }

    // Utility functions
    function extractDomain(url) {
      try {
        const urlObj = new URL(url);
        let domain = urlObj.hostname.replace('www.', '');
        
        // Custom names for specific URLs
        if (url.includes('geometry-dash')) {
          return 'Geometry Dash';
        } else if (url.includes('among-us')) {
          return 'Among Us';
        } else if (url.includes('roblox') || url.includes('/19900/')) {
          return 'Roblox';
        } else if (url.includes('fortnite') || url.includes('/10004/')) {
          return 'Fortnite';
        } else if (url.includes('cookie-run') || url.includes('/10019/')) {
          return 'Cookie Run Kingdom';
        } else if (url.includes('chatgpt')) {
          return 'ChatGPT';
        }
        
        // Shorten long domains
        if (domain.length > 20) {
          domain = domain.substring(0, 17) + '...';
        }
        return domain;
      } catch(e) {
        return null;
      }
    }

    // Fullscreen support
    document.addEventListener('fullscreenchange', function() {
      const browserContent = document.querySelector('.browser-content');
      if (document.fullscreenElement) {
        browserContent.style.height = '100vh';
        document.querySelector('.theme-selector').style.display = 'none';
      } else {
        browserContent.style.height = 'calc(100vh - 164px)';
        document.querySelector('.theme-selector').style.display = 'flex';
      }
    });
  </script>
</body>
</html>
